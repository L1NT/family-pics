<!DOCTYPE html>
<html>
<!-- main.html -->
   <head>
      <meta charset="utf-8" />
      <title>Jeter Family Pictures</title>
      <link rel="stylesheet" type="text/css" href="pic.css" />
      <link rel="stylesheet" href="thirdparty/fancybox/source/jquery.fancybox.css?v=2.1.0" type="text/css" media="screen" />
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
      <script type="text/javascript" src="thirdparty/fancybox/source/jquery.fancybox.pack.js?v=2.1.0"></script>
      <script type="text/javascript" src="thirdparty/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>
      <script type="text/javascript">
         var picServiceURL = 'webservice/familypics.py';
         var currPath = '/';
         var currIndex = '0';

         $(document).ready(function() {
            $(".fbox").fancybox();
            
            //add the initial nav bar items, then add the hover functionality
            $('nav')
               .append('<ul>')
               .each(
                  function() {
                     var directories = getDirectories('/');
                     for (var i=0; i<directories.length; i++) {
                        $(this).append('<li><a href="#" onclick="loadThumbnails(\'' + directories[i] + '\')>' + directories[i] + '</a></li>');
                     }
                  }
               )
               .hover(
                  function() {
                     $(this).find('iframe').contents().find('html').css('overflow', 'auto');
                     $('div#arrows').hide();
                     $(this).stop().animate(
                        {
                           left: '0',
                           backgroundColor: '#f00'
                        },
                        750
                        //'swing' is default, 'linear' is the only other option
                     );
                  },
                  function() {
                     $(this).find('iframe').contents().find('html').css('overflow', 'hidden');
                     $('div#arrows').show();
                     $(this).stop().animate(
                        {
                           left: '-155px',
                           backgroundColor: '#666'
                        },
                        1500,
                        'linear'
                     );
                  }
               )
               .append('</ul>');
         });
        
         function getDirectories(path) {
            var dataString = 'function=get_directories&path=' + path; 
            $.ajax({
               url: picServiceURL,
               data: dataString,
               success: function(data) {
                  $('#title').html('<a href=\"' + picService + '?function=get_directories&path=' + data[0] + '\" target=\"thumbnails\">'+ data[0] +'</a><br />');
                  $('#subtitle').html('');
                  for(var i=1; i<data.length; i++)
                     $('#subtitle').append('<a href=\"' + picService + '?function=get_directories&path='+ data[0] +'\" target=\"thumbnails\">'+ data[0] +'</a>/&nbsp;&nbsp;');
                  return data;
               }
               error: function() {
                  alert('There was an error retreiving the list of subdirectories.');
               }
            })
         }
        
         function getQuantity(path) {
         
         }
        
         function loadPic(url) {
           
         }
    </script>
  </head>

  <body class="index">
    <nav>
        <div id="arrows"><b>&gt;&gt;</b></div>
        
        <iframe src="frameindex.py" id="index" seamless></iframe>
    </nav>
    <hgroup>
      <h1 id="title">Jeter Family Digital Photo Album</h1>
      <h2 id="subtitle">(select a folder from the pullout menu to the left)</h2>
    </hgroup>
    <table id="thumbnails"></table>
  </body>
</html>
